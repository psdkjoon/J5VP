<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Verb Practice</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        h1 { color: #ffa011; font-weight: 300; }
        #flashcard {
            background-color: #1e1e1e;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
            text-align: center;
            width: 100%;
            max-width: 480px;
            border: 1px solid #333;
        }
        #verb-info p {
            font-size: 1.25em;
            margin: 12px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #verb-info p strong {
            color: #888;
            font-weight: 500;
            margin-right: 8px;
        }
        #handwriting-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 150px;
        }
        .kanji-box {
            background-color: #fff;
            border-radius: 8px;
            width: 150px;
            height: 150px;
        }
        button#next-button {
            background-color: #ffa011;
            color: #121212;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 15px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        button#next-button:hover { background-color: #a86706; }
        #speak-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.4em;
            padding: 0 8px;
            vertical-align: middle;
            color: #ffa011;
            margin-left: 5px;
        }
    </style>
</head>
<body>

    <h1>Japanese Verb Practice</h1>

    <div id="flashcard">
        <div id="verb-info">
            <p><strong>Meaning:</strong> <span id="meaning"></span></p>
            <p><strong>Kana:</strong> <span id="kana"></span><button id="speak-button" title="Read aloud">🔊</button></p>
            <p><strong>Kanji:</strong> <span id="kanji"></span></p>
            <p><strong>Type:</strong> <span id="type"></span></p>
        </div>
        <div id="handwriting-container"></div>
        <button id="next-button">Next Verb</button>
    </div>

    <!-- The HanziWriter library for handwriting practice -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    
    <!-- Full verb data (124 verbs) -->
    <script id="verb-data" type="application/json">
[{"kanji":"会う","kana":"あう","meaning":"to meet","type":"u-verb"},
{"kanji":"遊ぶ","kana":"あそぶ","meaning":"to play","type":"u-verb"},
{"kanji":"洗う","kana":"あらう","meaning":"to wash","type":"u-verb"},
{"kanji":"ある","kana":"ある","meaning":"to exist (things)","type":"u-verb"},
{"kanji":"言う","kana":"いう","meaning":"to say","type":"u-verb"},
{"kanji":"行く","kana":"いく","meaning":"to go","type":"u-verb"},
{"kanji":"いる","kana":"いる","meaning":"to exist (people)","type":"ru-verb"},
{"kanji":"歌う","kana":"うたう","meaning":"to sing","type":"u-verb"},
{"kanji":"売る","kana":"うる","meaning":"to sell","type":"u-verb"},
{"kanji":"起きる","kana":"おきる","meaning":"to get up","type":"ru-verb"},
{"kanji":"思う","kana":"おもう","meaning":"to think","type":"u-verb"},
{"kanji":"買う","kana":"かう","meaning":"to buy","type":"u-verb"},
{"kanji":"帰る","kana":"かえる","meaning":"to return home","type":"u-verb"},
{"kanji":"書く","kana":"かく","meaning":"to write","type":"u-verb"},
{"kanji":"聞く","kana":"きく","meaning":"to listen/ask","type":"u-verb"},
{"kanji":"来る","kana":"くる","meaning":"to come","type":"irregular-verb"},
{"kanji":"知る","kana":"しる","meaning":"to know","type":"u-verb"},
{"kanji":"する","kana":"する","meaning":"to do","type":"irregular-verb"},
{"kanji":"食べる","kana":"たべる","meaning":"to eat","type":"ru-verb"},
{"kanji":"出る","kana":"でる","meaning":"to exit","type":"ru-verb"},
{"kanji":"寝る","kana":"ねる","meaning":"to sleep","type":"ru-verb"},
{"kanji":"飲む","kana":"のむ","meaning":"to drink","type":"u-verb"},
{"kanji":"入る","kana":"はいる","meaning":"to enter","type":"u-verb"},
{"kanji":"働く","kana":"はたらく","meaning":"to work","type":"u-verb"},
{"kanji":"話す","kana":"はなす","meaning":"to speak","type":"u-verb"},
{"kanji":"見る","kana":"みる","meaning":"to see/watch","type":"ru-verb"},
{"kanji":"休む","kana":"やすむ","meaning":"to rest","type":"u-verb"},
{"kanji":"読む","kana":"よむ","meaning":"to read","type":"u-verb"},
{"kanji":"分かる","kana":"わかる","meaning":"to understand","type":"u-verb"},
{"kanji":"作る","kana":"つくる","meaning":"to make","type":"u-verb"},
{"kanji":"待つ","kana":"まつ","meaning":"to wait","type":"u-verb"},
{"kanji":"教える","kana":"おしえる","meaning":"to teach","type":"ru-verb"},
{"kanji":"住む","kana":"すむ","meaning":"to live/reside","type":"u-verb"},
{"kanji":"使う","kana":"つかう","meaning":"to use","type":"u-verb"},
{"kanji":"持つ","kana":"もつ","meaning":"to hold/have","type":"u-verb"},
{"kanji":"開ける","kana":"あける","meaning":"to open","type":"ru-verb"},
{"kanji":"あげる","kana":"あげる","meaning":"to give (to others)","type":"ru-verb"},
{"kanji":"入れる","kana":"いれる","meaning":"to insert/put in","type":"ru-verb"},
{"kanji":"生まれる","kana":"うまれる","meaning":"to be born","type":"ru-verb"},
{"kanji":"置く","kana":"おく","meaning":"to put/place","type":"u-verb"},
{"kanji":"送る","kana":"おくる","meaning":"to send","type":"u-verb"},
{"kanji":"覚える","kana":"おぼえる","meaning":"to memorize","type":"ru-verb"},
{"kanji":"泳ぐ","kana":"およぐ","meaning":"to swim","type":"u-verb"},
{"kanji":"降りる","kana":"おりる","meaning":"to get off","type":"ru-verb"},
{"kanji":"貸す","kana":"かす","meaning":"to lend","type":"u-verb"},
{"kanji":"借りる","kana":"かりる","meaning":"to borrow","type":"ru-verb"},
{"kanji":"考える","kana":"かんがえる","meaning":"to consider","type":"ru-verb"},
{"kanji":"切る","kana":"きる","meaning":"to cut","type":"u-verb"},
{"kanji":"着る","kana":"きる","meaning":"to wear (upper)","type":"ru-verb"},
{"kanji":"消す","kana":"けす","meaning":"to erase/turn off","type":"u-verb"},
{"kanji":"散歩する","kana":"さんぽする","meaning":"to take a walk","type":"irregular-verb"},
{"kanji":"閉める","kana":"しめる","meaning":"to close","type":"ru-verb"},
{"kanji":"出す","kana":"だす","meaning":"to take out","type":"u-verb"},
{"kanji":"出かける","kana":"でかける","meaning":"to go out","type":"ru-verb"},
{"kanji":"手伝う","kana":"てつだう","meaning":"to help","type":"u-verb"},
{"kanji":"習う","kana":"ならう","meaning":"to learn","type":"u-verb"},
{"kanji":"もらう","kana":"もらう","meaning":"to receive","type":"u-verb"},
{"kanji":"忘れる","kana":"わすれる","meaning":"to forget","type":"ru-verb"},
{"kanji":"くれる","kana":"くれる","meaning":"to give (to me)","type":"ru-verb"},
{"kanji":"浴びる","kana":"あびる","meaning":"to bathe","type":"ru-verb"},
{"kanji":"案内する","kana":"あんないする","meaning":"to guide","type":"irregular-verb"},
{"kanji":"急ぐ","kana":"いそぐ","meaning":"to hurry","type":"u-verb"},
{"kanji":"運転する","kana":"うんてんする","meaning":"to drive","type":"irregular-verb"},
{"kanji":"押す","kana":"おす","meaning":"to push","type":"u-verb"},
{"kanji":"思い出す","kana":"おもいだす","meaning":"to recall","type":"u-verb"},
{"kanji":"終わる","kana":"おわる","meaning":"to finish","type":"u-verb"},
{"kanji":"かかる","kana":"かかる","meaning":"to take (time/money)","type":"u-verb"},
{"kanji":"結婚する","kana":"けっこんする","meaning":"to marry","type":"irregular-verb"},
{"kanji":"心配する","kana":"しんぱいする","meaning":"to worry","type":"irregular-verb"},
{"kanji":"捨てる","kana":"すてる","meaning":"to throw away","type":"ru-verb"},
{"kanji":"座る","kana":"すわる","meaning":"to sit","type":"u-verb"},
{"kanji":"説明する","kana":"せつめいする","meaning":"to explain","type":"irregular-verb"},
{"kanji":"立つ","kana":"たつ","meaning":"to stand","type":"u-verb"},
{"kanji":"疲れる","kana":"つかれる","meaning":"to get tired","type":"ru-verb"},
{"kanji":"できる","kana":"できる","meaning":"to be able to","type":"ru-verb"},
{"kanji":"電話をかける","kana":"でんわをかける","meaning":"to make a call","type":"ru-verb"},
{"kanji":"失くす","kana":"なくす","meaning":"to lose","type":"u-verb"},
{"kanji":"脱ぐ","kana":"ぬぐ","meaning":"to take off (clothes)","type":"u-verb"},
{"kanji":"登る","kana":"のぼる","meaning":"to climb","type":"u-verb"},
{"kanji":"引く","kana":"ひく","meaning":"to pull/play (instrument)","type":"u-verb"},
{"kanji":"呼ぶ","kana":"よぶ","meaning":"to call","type":"u-verb"},
{"kanji":"返す","kana":"かえす","meaning":"to return (something)","type":"u-verb"},
{"kanji":"見せる","kana":"みせる","meaning":"to show","type":"ru-verb"},
{"kanji":"要る","kana":"いる","meaning":"to need","type":"u-verb"},
{"kanji":"準備する","kana":"じゅんびする","meaning":"to prepare","type":"irregular-verb"},
{"kanji":"勝つ","kana":"かつ","meaning":"to win","type":"u-verb"},
{"kanji":"頑張る","kana":"がんばる","meaning":"to do one's best","type":"u-verb"},
{"kanji":"負ける","kana":"まける","meaning":"to lose","type":"ru-verb"},
{"kanji":"始める","kana":"はじめる","meaning":"to begin (trans.)","type":"ru-verb"},
{"kanji":"変える","kana":"かえる","meaning":"to change","type":"ru-verb"},
{"kanji":"足りる","kana":"たりる","meaning":"to be enough","type":"ru-verb"},
{"kanji":"着く","kana":"つく","meaning":"to arrive","type":"u-verb"},
{"kanji":"連れて行く","kana":"つれていく","meaning":"to take (someone)","type":"u-verb"},
{"kanji":"連れてくる","kana":"つれてくる","meaning":"to bring (someone)","type":"irregular-verb"},
{"kanji":"止める","kana":"とめる","meaning":"to stop","type":"ru-verb"},
{"kanji":"なる","kana":"なる","meaning":"to become","type":"u-verb"},
{"kanji":"始まる","kana":"はじまる","meaning":"to begin (intrans.)","type":"u-verb"},
{"kanji":"弾く","kana":"ひく","meaning":"to play (string instrument)","type":"u-verb"},
{"kanji":"降る","kana":"ふる","meaning":"to fall (rain/snow)","type":"u-verb"},
{"kanji":"持っていく","kana":"もっていく","meaning":"to take (thing)","type":"u-verb"},
{"kanji":"持ってくる","kana":"もってくる","meaning":"to bring (thing)","type":"irregular-verb"},
{"kanji":"やめる","kana":"やめる","meaning":"to quit","type":"ru-verb"},
{"kanji":"描く","kana":"かく","meaning":"to draw/paint","type":"u-verb"},
{"kanji":"つける","kana":"つける","meaning":"to turn on","type":"ru-verb"},
{"kanji":"予約する","kana":"よやくする","meaning":"to reserve","type":"irregular-verb"},
{"kanji":"練習する","kana":"れんしゅうする","meaning":"to practice","type":"irregular-verb"},
{"kanji":"集める","kana":"あつめる","meaning":"to collect","type":"ru-verb"},
{"kanji":"修理する","kana":"しゅうりする","meaning":"to repair","type":"irregular-verb"},
{"kanji":"紹介する","kana":"しょうかいする","meaning":"to introduce","type":"irregular-verb"},
{"kanji":"動く","kana":"うごく","meaning":"to move","type":"u-verb"},
{"kanji":"下ろす","kana":"おろす","meaning":"to lower, unload","type":"u-verb"},
{"kanji":"掛ける","kana":"かける","meaning":"to hang, to sit","type":"ru-verb"},
{"kanji":"かぶる","kana":"かぶる","meaning":"to wear (on head)","type":"u-verb"},
{"kanji":"訊く","kana":"きく","meaning":"to ask","type":"u-verb"},
{"kanji":"触る","kana":"さわる","meaning":"to touch","type":"u-verb"},
{"kanji":"調べる","kana":"しらべる","meaning":"to check","type":"ru-verb"},
{"kanji":"泊まる","kana":"とまる","meaning":"to stay overnight","type":"u-verb"},
{"kanji":"直す","kana":"なおす","meaning":"to fix","type":"u-verb"},
{"kanji":"乗り換える","kana":"のりかえる","meaning":"to transfer (train)","type":"ru-verb"},
{"kanji":"回す","kana":"まわす","meaning":"to turn/rotate","type":"u-verb"},
{"kanji":"磨く","kana":"みがく","meaning":"to polish/brush","type":"u-verb"},
{"kanji":"迎える","kana":"むかえる","meaning":"to welcome","type":"ru-verb"},
{"kanji":"役に立つ","kana":"やくにたつ","meaning":"to be useful","type":"u-verb"},
{"kanji":"渡る","kana":"わたる","meaning":"to cross","type":"u-verb"}]
    </script>
    
    <!-- Main application logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const meaningEl = document.getElementById('meaning');
            const kanaEl = document.getElementById('kana');
            const kanjiEl = document.getElementById('kanji');
            const typeEl = document.getElementById('type');
            const nextButton = document.getElementById('next-button');
            const speakButton = document.getElementById('speak-button');
            const handwritingContainer = document.getElementById('handwriting-container');
            const flashcardEl = document.getElementById('flashcard');

            // --- ALL YOUR VERB DATA IS PARSED HERE ---
            const verbs = JSON.parse(document.getElementById('verb-data').textContent);
            
            // --- SHUFFLE THE VERBS ---
            for (let i = verbs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [verbs[i], verbs[j]] = [verbs[j], verbs[i]];
            }

            let currentVerbIndex = 0;

            // --- IMPROVED 'speak' FUNCTION ---
            function speak(text) {
                if (!('speechSynthesis' in window)) {
                    alert('Sorry, your browser does not support speech synthesis.');
                    return;
                }
                window.speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ja-JP';

                // Try to select a Japanese voice
                const voices = window.speechSynthesis.getVoices();
                const japaneseVoices = voices.filter(voice => voice.lang.startsWith('ja'));
                if (japaneseVoices.length > 0) {
                    utterance.voice = japaneseVoices[0];
                }

                window.speechSynthesis.speak(utterance);
            }

            // Some browsers load voices asynchronously
            if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {};
            }
            
            function loadVerb() {
                if (currentVerbIndex >= verbs.length) {
                    flashcardEl.innerHTML = `<h1>お疲れ様でした！</h1><p>(Otsukaresama deshita - Good work!)</p><p>You've practiced all the verbs. Reload to start again!</p>`;
                    return;
                }

                const verb = verbs[currentVerbIndex];
                meaningEl.textContent = verb.meaning;
                kanaEl.textContent = verb.kana;
                kanjiEl.textContent = verb.kanji;
                typeEl.textContent = verb.type;

                handwritingContainer.innerHTML = '';
                if (verb.kanji && verb.kanji !== '---') {
                    const kanjiToPractice = verb.kanji.replace(/[^一-龯]/g, '');
                    if (kanjiToPractice.length > 0) {
                        for (const char of kanjiToPractice) {
                            const box = document.createElement('div');
                            box.className = 'kanji-box';
                            handwritingContainer.appendChild(box);
                            const writer = HanziWriter.create(box, char, {
                                width: 150,
                                height: 150,
                                padding: 5,
                                showOutline: true,
                                strokeAnimationSpeed: 1,
                                delayBetweenStrokes: 200,
                                strokeColor: '#121212',
                                outlineColor: '#DDDDDD'
                            });
                            writer.quiz();
                        }
                    } else {
                        handwritingContainer.innerHTML = '<p style="color: #888;">This verb uses kana, no kanji to practice.</p>';
                    }
                } else {
                    handwritingContainer.innerHTML = '<p style="color: #888;">No Kanji for this verb.</p>';
                }

                // Automatically read the kana
                if (verb.kana) {
                    speak(verb.kana);
                }
            }
            
            nextButton.addEventListener('click', () => {
                currentVerbIndex++;
                loadVerb();
            });
            
            speakButton.addEventListener('click', () => {
                if (kanaEl.textContent) {
                    speak(kanaEl.textContent);
                }
            });

            // --- LOAD THE FIRST VERB ---
            loadVerb();
        });
    </script>
</body>
</html>