<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Verb Practice</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        h1 {
            color: #ffa011;
            font-weight: 300;
        }

        #flashcard {
            background-color: #1e1e1e;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
            text-align: center;
            width: 100%;
            max-width: 480px; /* Increased max-width to better fit multiple kanji */
            border: 1px solid #333;
        }

        #verb-info p {
            font-size: 1.25em;
            margin: 12px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #verb-info p strong {
            color: #888;
            font-weight: 500;
            margin-right: 8px;
        }

        #handwriting-container {
            margin: 20px 0;
            display: flex; /* Use Flexbox to align multiple kanji boxes */
            justify-content: center;
            align-items: center;
            flex-wrap: wrap; /* Allows wrapping if too many kanji */
            gap: 10px; /* Adds a nice space between kanji boxes */
            min-height: 150px;
        }

        .kanji-box {
            background-color: #fff;
            border-radius: 8px;
            width: 150px; /* Set a fixed size for each kanji box */
            height: 150px;
        }

        button#next-button {
            background-color: #ffa011;
            color: #121212;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 15px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }

        button#next-button:hover {
            background-color: #a86706;
        }
        
        #speak-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.4em;
            padding: 0 8px;
            vertical-align: middle;
            color: #ffa011;
            margin-left: 5px;
        }
    </style>
</head>
<body>

    <h1>Japanese Verb Practice</h1>

    <div id="flashcard">
        <div id="verb-info">
            <p><strong>Meaning:</strong> <span id="meaning"></span></p>
            <p><strong>Kana:</strong> <span id="kana"></span><button id="speak-button" title="Read aloud">🔊</button></p>
            <p><strong>Kanji:</strong> <span id="kanji"></span></p>
            <p><strong>Type:</strong> <span id="type"></span></p>
        </div>
        <div id="handwriting-container">
            </div>
        <button id="next-button">Next Verb</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    <script id="verb-data" type="application/json">
        [{"kanji":"有る","kana":"ある","meaning":"to be, to have","type":"u-verb"},{"kanji":"行く","kana":"いく","meaning":"to go","type":"u-verb"},{"kanji":"要る","kana":"いる","meaning":"to need","type":"u-verb"},{"kanji":"会う","kana":"あう","meaning":"to meet","type":"u-verb"},{"kanji":"開ける","kana":"あける","meaning":"to open","type":"ru-verb"},{"kanji":"遊ぶ","kana":"あそぶ","meaning":"to play","type":"u-verb"},{"kanji":"集まる","kana":"あつまる","meaning":"to gather","type":"u-verb"},{"kanji":"浴びる","kana":"あびる","meaning":"to bathe","type":"ru-verb"},{"kanji":"洗う","kana":"あらう","meaning":"to wash","type":"u-verb"},{"kanji":"言う","kana":"いう","meaning":"to say","type":"u-verb"},{"kanji":"入れる","kana":"いれる","meaning":"to insert","type":"ru-verb"},{"kanji":"動く","kana":"うごく","meaning":"to move","type":"u-verb"},{"kanji":"歌う","kana":"うたう","meaning":"to sing","type":"u-verb"},{"kanji":"生まれる","kana":"うまれる","meaning":"to be born","type":"ru-verb"},{"kanji":"売る","kana":"うる","meaning":"to sell","type":"u-verb"},{"kanji":"起きる","kana":"おきる","meaning":"to wake up","type":"ru-verb"},{"kanji":"置く","kana":"おく","meaning":"to put","type":"u-verb"},{"kanji":"教える","kana":"おしえる","meaning":"to teach","type":"ru-verb"},{"kanji":"押す","kana":"おす","meaning":"to push","type":"u-verb"},{"kanji":"覚える","kana":"おぼえる","meaning":"to remember","type":"ru-verb"},{"kanji":"泳ぐ","kana":"およぐ","meaning":"to swim","type":"u-verb"},{"kanji":"降りる","kana":"おりる","meaning":"to get off","type":"ru-verb"},{"kanji":"終わる","kana":"おわる","meaning":"to end","type":"u-verb"},{"kanji":"買う","kana":"かう","meaning":"to buy","type":"u-verb"},{"kanji":"返す","kana":"かえす","meaning":"to return (a thing)","type":"u-verb"},{"kanji":"帰る","kana":"かえる","meaning":"to go home","type":"u-verb"},{"kanji":"掛かる","kana":"かかる","meaning":"to take (time, money)","type":"u-verb"},{"kanji":"書く","kana":"かく","meaning":"to write","type":"u-verb"},{"kanji":"借りる","kana":"かりる","meaning":"to borrow","type":"ru-verb"},{"kanji":"消える","kana":"きえる","meaning":"to disappear","type":"ru-verb"},{"kanji":"聞く","kana":"きく","meaning":"to listen","type":"u-verb"},{"kanji":"決める","kana":"きめる","meaning":"to decide","type":"ru-verb"},{"kanji":"着る","kana":"きる","meaning":"to wear","type":"ru-verb"},{"kanji":"---","kana":"くださる","meaning":"to give (to me)","type":"u-verb"},{"kanji":"---","kana":"くれる","meaning":"to give (to me)","type":"ru-verb"},{"kanji":"閉める","kana":"しめる","meaning":"to close","type":"ru-verb"},{"kanji":"知る","kana":"しる","meaning":"to know","type":"u-verb"},{"kanji":"吸う","kana":"すう","meaning":"to smoke, to inhale","type":"u-verb"},{"kanji":"住む","kana":"すむ","meaning":"to live","type":"u-verb"},{"kanji":"座る","kana":"すわる","meaning":"to sit","type":"u-verb"},{"kanji":"出す","kana":"だす","meaning":"to take out, submit","type":"u-verb"},{"kanji":"立つ","kana":"たつ","meaning":"to stand","type":"u-verb"},{"kanji":"頼む","kana":"たのむ","meaning":"to ask, to request","type":"u-verb"},{"kanji":"食べる","kana":"たべる","meaning":"to eat","type":"ru-verb"},{"kanji":"違う","kana":"ちがう","meaning":"to be different","type":"u-verb"},{"kanji":"使う","kana":"つかう","meaning":"to use","type":"u-verb"},{"kanji":"疲れる","kana":"つかれる","meaning":"to be tired","type":"ru-verb"},{"kanji":"着く","kana":"つく","meaning":"to arrive","type":"u-verb"},{"kanji":"作る","kana":"つくる","meaning":"to make","type":"u-verb"},{"kanji":"付ける","kana":"つける","meaning":"to turn on","type":"ru-verb"},{"kanji":"勤める","kana":"つとめる","meaning":"to work for","type":"ru-verb"},{"kanji":"出掛ける","kana":"でかける","meaning":"to go out","type":"ru-verb"},{"kanji":"---","kana":"できる","meaning":"to be able to","type":"ru-verb"},{"kanji":"出る","kana":"でる","meaning":"to leave","type":"ru-verb"},{"kanji":"飛ぶ","kana":"とぶ","meaning":"to fly","type":"u-verb"},{"kanji":"止まる","kana":"とまる","meaning":"to stop","type":"u-verb"},{"kanji":"取る","kana":"とる","meaning":"to take","type":"u-verb"},{"kanji":"撮る","kana":"とる","meaning":"to take (a photo)","type":"u-verb"},{"kanji":"直す","kana":"なおす","meaning":"to fix","type":"u-verb"},{"kanji":"習う","kana":"ならう","meaning":"to learn","type":"u-verb"},{"kanji":"なる","kana":"なる","meaning":"to become","type":"u-verb"},{"kanji":"脱ぐ","kana":"ぬぐ","meaning":"to take off (clothes)","type":"u-verb"},{"kanji":"寝る","kana":"ねる","meaning":"to sleep","type":"ru-verb"},{"kanji":"登る","kana":"のぼる","meaning":"to climb","type":"u-verb"},{"kanji":"飲む","kana":"のむ","meaning":"to drink","type":"u-verb"},{"kanji":"乗る","kana":"のる","meaning":"to ride","type":"u-verb"},{"kanji":"入る","kana":"はいる","meaning":"to enter","type":"u-verb"},{"kanji":"履く","kana":"はく","meaning":"to wear (below waist)","type":"u-verb"},{"kanji":"始まる","kana":"はじまる","meaning":"to begin","type":"u-verb"},{"kanji":"走る","kana":"はしる","meaning":"to run","type":"u-verb"},{"kanji":"働く","kana":"はたらく","meaning":"to work","type":"u-verb"},{"kanji":"話す","kana":"はなす","meaning":"to speak","type":"u-verb"},{"kanji":"張る","kana":"はる","meaning":"to post, to stick","type":"u-verb"},{"kanji":"晴れる","kana":"はれる","meaning":"to be sunny","type":"ru-verb"},{"kanji":"引く","kana":"ひく","meaning":"to pull","type":"u-verb"},{"kanji":"弾く","kana":"ひく","meaning":"to play (a string instrument)","type":"u-verb"},{"kanji":"太る","kana":"ふとる","meaning":"to get fat","type":"u-verb"},{"kanji":"降る","kana":"ふる","meaning":"to fall (rain, snow)","type":"u-verb"},{"kanji":"曲がる","kana":"まがる","meaning":"to turn","type":"u-verb"},{"kanji":"待つ","kana":"まつ","meaning":"to wait","type":"u-verb"},{"kanji":"磨く","kana":"みがく","meaning":"to brush, to polish","type":"u-verb"},{"kanji":"見せる","kana":"みせる","meaning":"to show","type":"ru-verb"},{"kanji":"見る","kana":"みる","meaning":"to see","type":"ru-verb"},{"kanji":"持つ","kana":"もつ","meaning":"to hold","type":"u-verb"},{"kanji":"休む","kana":"やすむ","meaning":"to rest, to be absent","type":"u-verb"},{"kanji":"痩せる","kana":"やせる","meaning":"to become slim","type":"ru-verb"},{"kanji":"呼ぶ","kana":"よぶ","meaning":"to call","type":"u-verb"},{"kanji":"読む","kana":"よむ","meaning":"to read","type":"u-verb"},{"kanji":"分かる","kana":"わかる","meaning":"to understand","type":"u-verb"},{"kanji":"忘れる","kana":"わすれる","meaning":"to forget","type":"ru-verb"},{"kanji":"渡す","kana":"わたす","meaning":"to hand over","type":"u-verb"},{"kanji":"渡る","kana":"わたる","meaning":"to cross","type":"u-verb"},{"kanji":"笑う","kana":"わらう","meaning":"to laugh","type":"u-verb"},{"kanji":"---","kana":"あげる","meaning":"to give","type":"ru-verb"},{"kanji":"---","kana":"いらっしゃる","meaning":"to be, to go, to come (respectful)","type":"u-verb"},{"kanji":"---","kana":"おっしゃる","meaning":"to say (respectful)","type":"u-verb"},{"kanji":"---","kana":"なさる","meaning":"to do (respectful)","type":"u-verb"},{"kanji":"---","kana":"めしあがる","meaning":"to eat, to drink (respectful)","type":"u-verb"},{"kanji":"---","kana":"ごらんになる","meaning":"to see (respectful)","type":"u-verb"},{"kanji":"---","kana":"いる","meaning":"to be (animate)","type":"ru-verb"},{"kanji":"来る","kana":"くる","meaning":"to come","type":"irregular-verb"},{"kanji":"---","kana":"する","meaning":"to do","type":"irregular-verb"},{"kanji":"勉強する","kana":"べんきょうする","meaning":"to study","type":"irregular-verb"},{"kanji":"連れて来る","kana":"つれてくる","meaning":"to bring (a person)","type":"irregular-verb"},{"kanji":"持って来る","kana":"もってくる","meaning":"to bring (a thing)","type":"irregular-verb"}]
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const meaningEl = document.getElementById('meaning');
            const kanaEl = document.getElementById('kana');
            const kanjiEl = document.getElementById('kanji');
            const typeEl = document.getElementById('type');
            const nextButton = document.getElementById('next-button');
            const speakButton = document.getElementById('speak-button');
            const handwritingContainer = document.getElementById('handwriting-container');
            const flashcardEl = document.getElementById('flashcard');

            const verbs = JSON.parse(document.getElementById('verb-data').textContent);
            
            for (let i = verbs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [verbs[i], verbs[j]] = [verbs[j], verbs[i]];
            }

            let currentVerbIndex = 0;

            function speak(text) {
                const audioUrl = `https://translate.google.com/translate_tts?ie=UTF-8&client=tw-ob&q=${encodeURIComponent(text)}&tl=ja`;
                const audio = new Audio(audioUrl);
                audio.play();
            }
            
            function loadVerb() {
                if (currentVerbIndex >= verbs.length) {
                    flashcardEl.innerHTML = `<h1>お疲れ様でした！</h1><p>(Otsukaresama deshita - Good work!)</p><p>You've practiced all the verbs. Reload to start again!</p>`;
                    return;
                }

                const verb = verbs[currentVerbIndex];
                meaningEl.textContent = verb.meaning;
                kanaEl.textContent = verb.kana;
                kanjiEl.textContent = verb.kanji;
                typeEl.textContent = verb.type;

                if (verb.kana) {
                    speak(verb.kana);
                }

                handwritingContainer.innerHTML = '';

                if (verb.kanji && verb.kanji !== '---') {
                    const kanjiToPractice = verb.kanji.replace(/[^一-龯]/g, '');
                    if (kanjiToPractice.length > 0) {
                        for (const char of kanjiToPractice) {
                            const box = document.createElement('div');
                            box.className = 'kanji-box';
                            handwritingContainer.appendChild(box);
                            const writer = HanziWriter.create(box, char, {
                                width: 150,
                                height: 150,
                                padding: 5,
                                showOutline: true,
                                strokeAnimationSpeed: 1,
                                delayBetweenStrokes: 200,
                                strokeColor: '#121212', // Dark stroke color
                                outlineColor: '#DDDDDD'
                            });
                            writer.quiz();
                        }
                    } else {
                        handwritingContainer.innerHTML = '<p style="color: #888;">This verb uses kana, no kanji to practice.</p>';
                    }
                } else {
                    handwritingContainer.innerHTML = '<p style="color: #888;">No Kanji for this verb.</p>';
                }
            }
            
            nextButton.addEventListener('click', () => {
                currentVerbIndex++;
                loadVerb();
            });
            
            speakButton.addEventListener('click', () => {
                if (kanaEl.textContent) {
                    speak(kanaEl.textContent);
                }
            });

            loadVerb();
        });
    </script>
</body>
</html>
