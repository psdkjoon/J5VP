<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japanese Verb Practice</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        h1 { color: #ffa011; font-weight: 300; }
        #flashcard {
            background-color: #1e1e1e;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
            text-align: center;
            width: 100%;
            max-width: 480px;
            border: 1px solid #333;
        }
        #verb-info p {
            font-size: 1.25em;
            margin: 12px 0;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        #verb-info p strong {
            color: #888;
            font-weight: 500;
            margin-right: 8px;
        }
        #handwriting-container {
            margin: 20px 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 150px;
        }
        .kanji-box {
            background-color: #fff;
            border-radius: 8px;
            width: 150px;
            height: 150px;
        }
        button#next-button {
            background-color: #ffa011;
            color: #121212;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 15px;
            font-weight: bold;
            transition: background-color 0.2s ease;
        }
        button#next-button:hover { background-color: #a86706; }
        #speak-button {
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.4em;
            padding: 0 8px;
            vertical-align: middle;
            color: #ffa011;
            margin-left: 5px;
        }
    </style>
</head>
<body>

    <h1>Japanese Verb Practice</h1>

    <div id="flashcard">
        <div id="verb-info">
            <p><strong>Meaning:</strong> <span id="meaning"></span></p>
            <p><strong>Kana:</strong> <span id="kana"></span><button id="speak-button" title="Read aloud">ğŸ”Š</button></p>
            <p><strong>Kanji:</strong> <span id="kanji"></span></p>
            <p><strong>Type:</strong> <span id="type"></span></p>
        </div>
        <div id="handwriting-container"></div>
        <button id="next-button">Next Verb</button>
    </div>

    <!-- The HanziWriter library for handwriting practice -->
    <script src="https://cdn.jsdelivr.net/npm/hanzi-writer@3.5/dist/hanzi-writer.min.js"></script>
    
    <!-- Full verb data (124 verbs) -->
    <script id="verb-data" type="application/json">
[{"kanji":"ä¼šã†","kana":"ã‚ã†","meaning":"to meet","type":"u-verb"},
{"kanji":"éŠã¶","kana":"ã‚ãã¶","meaning":"to play","type":"u-verb"},
{"kanji":"æ´—ã†","kana":"ã‚ã‚‰ã†","meaning":"to wash","type":"u-verb"},
{"kanji":"ã‚ã‚‹","kana":"ã‚ã‚‹","meaning":"to exist (things)","type":"u-verb"},
{"kanji":"è¨€ã†","kana":"ã„ã†","meaning":"to say","type":"u-verb"},
{"kanji":"è¡Œã","kana":"ã„ã","meaning":"to go","type":"u-verb"},
{"kanji":"ã„ã‚‹","kana":"ã„ã‚‹","meaning":"to exist (people)","type":"ru-verb"},
{"kanji":"æ­Œã†","kana":"ã†ãŸã†","meaning":"to sing","type":"u-verb"},
{"kanji":"å£²ã‚‹","kana":"ã†ã‚‹","meaning":"to sell","type":"u-verb"},
{"kanji":"èµ·ãã‚‹","kana":"ãŠãã‚‹","meaning":"to get up","type":"ru-verb"},
{"kanji":"æ€ã†","kana":"ãŠã‚‚ã†","meaning":"to think","type":"u-verb"},
{"kanji":"è²·ã†","kana":"ã‹ã†","meaning":"to buy","type":"u-verb"},
{"kanji":"å¸°ã‚‹","kana":"ã‹ãˆã‚‹","meaning":"to return home","type":"u-verb"},
{"kanji":"æ›¸ã","kana":"ã‹ã","meaning":"to write","type":"u-verb"},
{"kanji":"èã","kana":"ãã","meaning":"to listen/ask","type":"u-verb"},
{"kanji":"æ¥ã‚‹","kana":"ãã‚‹","meaning":"to come","type":"irregular-verb"},
{"kanji":"çŸ¥ã‚‹","kana":"ã—ã‚‹","meaning":"to know","type":"u-verb"},
{"kanji":"ã™ã‚‹","kana":"ã™ã‚‹","meaning":"to do","type":"irregular-verb"},
{"kanji":"é£Ÿã¹ã‚‹","kana":"ãŸã¹ã‚‹","meaning":"to eat","type":"ru-verb"},
{"kanji":"å‡ºã‚‹","kana":"ã§ã‚‹","meaning":"to exit","type":"ru-verb"},
{"kanji":"å¯ã‚‹","kana":"ã­ã‚‹","meaning":"to sleep","type":"ru-verb"},
{"kanji":"é£²ã‚€","kana":"ã®ã‚€","meaning":"to drink","type":"u-verb"},
{"kanji":"å…¥ã‚‹","kana":"ã¯ã„ã‚‹","meaning":"to enter","type":"u-verb"},
{"kanji":"åƒã","kana":"ã¯ãŸã‚‰ã","meaning":"to work","type":"u-verb"},
{"kanji":"è©±ã™","kana":"ã¯ãªã™","meaning":"to speak","type":"u-verb"},
{"kanji":"è¦‹ã‚‹","kana":"ã¿ã‚‹","meaning":"to see/watch","type":"ru-verb"},
{"kanji":"ä¼‘ã‚€","kana":"ã‚„ã™ã‚€","meaning":"to rest","type":"u-verb"},
{"kanji":"èª­ã‚€","kana":"ã‚ˆã‚€","meaning":"to read","type":"u-verb"},
{"kanji":"åˆ†ã‹ã‚‹","kana":"ã‚ã‹ã‚‹","meaning":"to understand","type":"u-verb"},
{"kanji":"ä½œã‚‹","kana":"ã¤ãã‚‹","meaning":"to make","type":"u-verb"},
{"kanji":"å¾…ã¤","kana":"ã¾ã¤","meaning":"to wait","type":"u-verb"},
{"kanji":"æ•™ãˆã‚‹","kana":"ãŠã—ãˆã‚‹","meaning":"to teach","type":"ru-verb"},
{"kanji":"ä½ã‚€","kana":"ã™ã‚€","meaning":"to live/reside","type":"u-verb"},
{"kanji":"ä½¿ã†","kana":"ã¤ã‹ã†","meaning":"to use","type":"u-verb"},
{"kanji":"æŒã¤","kana":"ã‚‚ã¤","meaning":"to hold/have","type":"u-verb"},
{"kanji":"é–‹ã‘ã‚‹","kana":"ã‚ã‘ã‚‹","meaning":"to open","type":"ru-verb"},
{"kanji":"ã‚ã’ã‚‹","kana":"ã‚ã’ã‚‹","meaning":"to give (to others)","type":"ru-verb"},
{"kanji":"å…¥ã‚Œã‚‹","kana":"ã„ã‚Œã‚‹","meaning":"to insert/put in","type":"ru-verb"},
{"kanji":"ç”Ÿã¾ã‚Œã‚‹","kana":"ã†ã¾ã‚Œã‚‹","meaning":"to be born","type":"ru-verb"},
{"kanji":"ç½®ã","kana":"ãŠã","meaning":"to put/place","type":"u-verb"},
{"kanji":"é€ã‚‹","kana":"ãŠãã‚‹","meaning":"to send","type":"u-verb"},
{"kanji":"è¦šãˆã‚‹","kana":"ãŠã¼ãˆã‚‹","meaning":"to memorize","type":"ru-verb"},
{"kanji":"æ³³ã","kana":"ãŠã‚ˆã","meaning":"to swim","type":"u-verb"},
{"kanji":"é™ã‚Šã‚‹","kana":"ãŠã‚Šã‚‹","meaning":"to get off","type":"ru-verb"},
{"kanji":"è²¸ã™","kana":"ã‹ã™","meaning":"to lend","type":"u-verb"},
{"kanji":"å€Ÿã‚Šã‚‹","kana":"ã‹ã‚Šã‚‹","meaning":"to borrow","type":"ru-verb"},
{"kanji":"è€ƒãˆã‚‹","kana":"ã‹ã‚“ãŒãˆã‚‹","meaning":"to consider","type":"ru-verb"},
{"kanji":"åˆ‡ã‚‹","kana":"ãã‚‹","meaning":"to cut","type":"u-verb"},
{"kanji":"ç€ã‚‹","kana":"ãã‚‹","meaning":"to wear (upper)","type":"ru-verb"},
{"kanji":"æ¶ˆã™","kana":"ã‘ã™","meaning":"to erase/turn off","type":"u-verb"},
{"kanji":"æ•£æ­©ã™ã‚‹","kana":"ã•ã‚“ã½ã™ã‚‹","meaning":"to take a walk","type":"irregular-verb"},
{"kanji":"é–‰ã‚ã‚‹","kana":"ã—ã‚ã‚‹","meaning":"to close","type":"ru-verb"},
{"kanji":"å‡ºã™","kana":"ã ã™","meaning":"to take out","type":"u-verb"},
{"kanji":"å‡ºã‹ã‘ã‚‹","kana":"ã§ã‹ã‘ã‚‹","meaning":"to go out","type":"ru-verb"},
{"kanji":"æ‰‹ä¼ã†","kana":"ã¦ã¤ã ã†","meaning":"to help","type":"u-verb"},
{"kanji":"ç¿’ã†","kana":"ãªã‚‰ã†","meaning":"to learn","type":"u-verb"},
{"kanji":"ã‚‚ã‚‰ã†","kana":"ã‚‚ã‚‰ã†","meaning":"to receive","type":"u-verb"},
{"kanji":"å¿˜ã‚Œã‚‹","kana":"ã‚ã™ã‚Œã‚‹","meaning":"to forget","type":"ru-verb"},
{"kanji":"ãã‚Œã‚‹","kana":"ãã‚Œã‚‹","meaning":"to give (to me)","type":"ru-verb"},
{"kanji":"æµ´ã³ã‚‹","kana":"ã‚ã³ã‚‹","meaning":"to bathe","type":"ru-verb"},
{"kanji":"æ¡ˆå†…ã™ã‚‹","kana":"ã‚ã‚“ãªã„ã™ã‚‹","meaning":"to guide","type":"irregular-verb"},
{"kanji":"æ€¥ã","kana":"ã„ãã","meaning":"to hurry","type":"u-verb"},
{"kanji":"é‹è»¢ã™ã‚‹","kana":"ã†ã‚“ã¦ã‚“ã™ã‚‹","meaning":"to drive","type":"irregular-verb"},
{"kanji":"æŠ¼ã™","kana":"ãŠã™","meaning":"to push","type":"u-verb"},
{"kanji":"æ€ã„å‡ºã™","kana":"ãŠã‚‚ã„ã ã™","meaning":"to recall","type":"u-verb"},
{"kanji":"çµ‚ã‚ã‚‹","kana":"ãŠã‚ã‚‹","meaning":"to finish","type":"u-verb"},
{"kanji":"ã‹ã‹ã‚‹","kana":"ã‹ã‹ã‚‹","meaning":"to take (time/money)","type":"u-verb"},
{"kanji":"çµå©šã™ã‚‹","kana":"ã‘ã£ã“ã‚“ã™ã‚‹","meaning":"to marry","type":"irregular-verb"},
{"kanji":"å¿ƒé…ã™ã‚‹","kana":"ã—ã‚“ã±ã„ã™ã‚‹","meaning":"to worry","type":"irregular-verb"},
{"kanji":"æ¨ã¦ã‚‹","kana":"ã™ã¦ã‚‹","meaning":"to throw away","type":"ru-verb"},
{"kanji":"åº§ã‚‹","kana":"ã™ã‚ã‚‹","meaning":"to sit","type":"u-verb"},
{"kanji":"èª¬æ˜ã™ã‚‹","kana":"ã›ã¤ã‚ã„ã™ã‚‹","meaning":"to explain","type":"irregular-verb"},
{"kanji":"ç«‹ã¤","kana":"ãŸã¤","meaning":"to stand","type":"u-verb"},
{"kanji":"ç–²ã‚Œã‚‹","kana":"ã¤ã‹ã‚Œã‚‹","meaning":"to get tired","type":"ru-verb"},
{"kanji":"ã§ãã‚‹","kana":"ã§ãã‚‹","meaning":"to be able to","type":"ru-verb"},
{"kanji":"é›»è©±ã‚’ã‹ã‘ã‚‹","kana":"ã§ã‚“ã‚ã‚’ã‹ã‘ã‚‹","meaning":"to make a call","type":"ru-verb"},
{"kanji":"å¤±ãã™","kana":"ãªãã™","meaning":"to lose","type":"u-verb"},
{"kanji":"è„±ã","kana":"ã¬ã","meaning":"to take off (clothes)","type":"u-verb"},
{"kanji":"ç™»ã‚‹","kana":"ã®ã¼ã‚‹","meaning":"to climb","type":"u-verb"},
{"kanji":"å¼•ã","kana":"ã²ã","meaning":"to pull/play (instrument)","type":"u-verb"},
{"kanji":"å‘¼ã¶","kana":"ã‚ˆã¶","meaning":"to call","type":"u-verb"},
{"kanji":"è¿”ã™","kana":"ã‹ãˆã™","meaning":"to return (something)","type":"u-verb"},
{"kanji":"è¦‹ã›ã‚‹","kana":"ã¿ã›ã‚‹","meaning":"to show","type":"ru-verb"},
{"kanji":"è¦ã‚‹","kana":"ã„ã‚‹","meaning":"to need","type":"u-verb"},
{"kanji":"æº–å‚™ã™ã‚‹","kana":"ã˜ã‚…ã‚“ã³ã™ã‚‹","meaning":"to prepare","type":"irregular-verb"},
{"kanji":"å‹ã¤","kana":"ã‹ã¤","meaning":"to win","type":"u-verb"},
{"kanji":"é ‘å¼µã‚‹","kana":"ãŒã‚“ã°ã‚‹","meaning":"to do one's best","type":"u-verb"},
{"kanji":"è² ã‘ã‚‹","kana":"ã¾ã‘ã‚‹","meaning":"to lose","type":"ru-verb"},
{"kanji":"å§‹ã‚ã‚‹","kana":"ã¯ã˜ã‚ã‚‹","meaning":"to begin (trans.)","type":"ru-verb"},
{"kanji":"å¤‰ãˆã‚‹","kana":"ã‹ãˆã‚‹","meaning":"to change","type":"ru-verb"},
{"kanji":"è¶³ã‚Šã‚‹","kana":"ãŸã‚Šã‚‹","meaning":"to be enough","type":"ru-verb"},
{"kanji":"ç€ã","kana":"ã¤ã","meaning":"to arrive","type":"u-verb"},
{"kanji":"é€£ã‚Œã¦è¡Œã","kana":"ã¤ã‚Œã¦ã„ã","meaning":"to take (someone)","type":"u-verb"},
{"kanji":"é€£ã‚Œã¦ãã‚‹","kana":"ã¤ã‚Œã¦ãã‚‹","meaning":"to bring (someone)","type":"irregular-verb"},
{"kanji":"æ­¢ã‚ã‚‹","kana":"ã¨ã‚ã‚‹","meaning":"to stop","type":"ru-verb"},
{"kanji":"ãªã‚‹","kana":"ãªã‚‹","meaning":"to become","type":"u-verb"},
{"kanji":"å§‹ã¾ã‚‹","kana":"ã¯ã˜ã¾ã‚‹","meaning":"to begin (intrans.)","type":"u-verb"},
{"kanji":"å¼¾ã","kana":"ã²ã","meaning":"to play (string instrument)","type":"u-verb"},
{"kanji":"é™ã‚‹","kana":"ãµã‚‹","meaning":"to fall (rain/snow)","type":"u-verb"},
{"kanji":"æŒã£ã¦ã„ã","kana":"ã‚‚ã£ã¦ã„ã","meaning":"to take (thing)","type":"u-verb"},
{"kanji":"æŒã£ã¦ãã‚‹","kana":"ã‚‚ã£ã¦ãã‚‹","meaning":"to bring (thing)","type":"irregular-verb"},
{"kanji":"ã‚„ã‚ã‚‹","kana":"ã‚„ã‚ã‚‹","meaning":"to quit","type":"ru-verb"},
{"kanji":"æã","kana":"ã‹ã","meaning":"to draw/paint","type":"u-verb"},
{"kanji":"ã¤ã‘ã‚‹","kana":"ã¤ã‘ã‚‹","meaning":"to turn on","type":"ru-verb"},
{"kanji":"äºˆç´„ã™ã‚‹","kana":"ã‚ˆã‚„ãã™ã‚‹","meaning":"to reserve","type":"irregular-verb"},
{"kanji":"ç·´ç¿’ã™ã‚‹","kana":"ã‚Œã‚“ã—ã‚…ã†ã™ã‚‹","meaning":"to practice","type":"irregular-verb"},
{"kanji":"é›†ã‚ã‚‹","kana":"ã‚ã¤ã‚ã‚‹","meaning":"to collect","type":"ru-verb"},
{"kanji":"ä¿®ç†ã™ã‚‹","kana":"ã—ã‚…ã†ã‚Šã™ã‚‹","meaning":"to repair","type":"irregular-verb"},
{"kanji":"ç´¹ä»‹ã™ã‚‹","kana":"ã—ã‚‡ã†ã‹ã„ã™ã‚‹","meaning":"to introduce","type":"irregular-verb"},
{"kanji":"å‹•ã","kana":"ã†ã”ã","meaning":"to move","type":"u-verb"},
{"kanji":"ä¸‹ã‚ã™","kana":"ãŠã‚ã™","meaning":"to lower, unload","type":"u-verb"},
{"kanji":"æ›ã‘ã‚‹","kana":"ã‹ã‘ã‚‹","meaning":"to hang, to sit","type":"ru-verb"},
{"kanji":"ã‹ã¶ã‚‹","kana":"ã‹ã¶ã‚‹","meaning":"to wear (on head)","type":"u-verb"},
{"kanji":"è¨Šã","kana":"ãã","meaning":"to ask","type":"u-verb"},
{"kanji":"è§¦ã‚‹","kana":"ã•ã‚ã‚‹","meaning":"to touch","type":"u-verb"},
{"kanji":"èª¿ã¹ã‚‹","kana":"ã—ã‚‰ã¹ã‚‹","meaning":"to check","type":"ru-verb"},
{"kanji":"æ³Šã¾ã‚‹","kana":"ã¨ã¾ã‚‹","meaning":"to stay overnight","type":"u-verb"},
{"kanji":"ç›´ã™","kana":"ãªãŠã™","meaning":"to fix","type":"u-verb"},
{"kanji":"ä¹—ã‚Šæ›ãˆã‚‹","kana":"ã®ã‚Šã‹ãˆã‚‹","meaning":"to transfer (train)","type":"ru-verb"},
{"kanji":"å›ã™","kana":"ã¾ã‚ã™","meaning":"to turn/rotate","type":"u-verb"},
{"kanji":"ç£¨ã","kana":"ã¿ãŒã","meaning":"to polish/brush","type":"u-verb"},
{"kanji":"è¿ãˆã‚‹","kana":"ã‚€ã‹ãˆã‚‹","meaning":"to welcome","type":"ru-verb"},
{"kanji":"å½¹ã«ç«‹ã¤","kana":"ã‚„ãã«ãŸã¤","meaning":"to be useful","type":"u-verb"},
{"kanji":"æ¸¡ã‚‹","kana":"ã‚ãŸã‚‹","meaning":"to cross","type":"u-verb"}]
    </script>
    
    <!-- Main application logic -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const meaningEl = document.getElementById('meaning');
            const kanaEl = document.getElementById('kana');
            const kanjiEl = document.getElementById('kanji');
            const typeEl = document.getElementById('type');
            const nextButton = document.getElementById('next-button');
            const speakButton = document.getElementById('speak-button');
            const handwritingContainer = document.getElementById('handwriting-container');
            const flashcardEl = document.getElementById('flashcard');

            // --- ALL YOUR VERB DATA IS PARSED HERE ---
            const verbs = JSON.parse(document.getElementById('verb-data').textContent);
            
            // --- SHUFFLE THE VERBS ---
            for (let i = verbs.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [verbs[i], verbs[j]] = [verbs[j], verbs[i]];
            }

            let currentVerbIndex = 0;

            // --- IMPROVED 'speak' FUNCTION ---
            function speak(text) {
                if (!('speechSynthesis' in window)) {
                    alert('Sorry, your browser does not support speech synthesis.');
                    return;
                }
                window.speechSynthesis.cancel();

                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'ja-JP';

                // Try to select a Japanese voice
                const voices = window.speechSynthesis.getVoices();
                const japaneseVoices = voices.filter(voice => voice.lang.startsWith('ja'));
                if (japaneseVoices.length > 0) {
                    utterance.voice = japaneseVoices[0];
                }

                window.speechSynthesis.speak(utterance);
            }

            // Some browsers load voices asynchronously
            if (typeof speechSynthesis !== 'undefined' && speechSynthesis.onvoiceschanged !== undefined) {
                speechSynthesis.onvoiceschanged = () => {};
            }
            
            function loadVerb() {
                if (currentVerbIndex >= verbs.length) {
                    flashcardEl.innerHTML = `<h1>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼</h1><p>(Otsukaresama deshita - Good work!)</p><p>You've practiced all the verbs. Reload to start again!</p>`;
                    return;
                }

                const verb = verbs[currentVerbIndex];
                meaningEl.textContent = verb.meaning;
                kanaEl.textContent = verb.kana;
                kanjiEl.textContent = verb.kanji;
                typeEl.textContent = verb.type;

                handwritingContainer.innerHTML = '';
                if (verb.kanji && verb.kanji !== '---') {
                    const kanjiToPractice = verb.kanji.replace(/[^ä¸€-é¾¯]/g, '');
                    if (kanjiToPractice.length > 0) {
                        for (const char of kanjiToPractice) {
                            const box = document.createElement('div');
                            box.className = 'kanji-box';
                            handwritingContainer.appendChild(box);
                            const writer = HanziWriter.create(box, char, {
                                width: 150,
                                height: 150,
                                padding: 5,
                                showOutline: true,
                                strokeAnimationSpeed: 1,
                                delayBetweenStrokes: 200,
                                strokeColor: '#121212',
                                outlineColor: '#DDDDDD'
                            });
                            writer.quiz();
                        }
                    } else {
                        handwritingContainer.innerHTML = '<p style="color: #888;">This verb uses kana, no kanji to practice.</p>';
                    }
                } else {
                    handwritingContainer.innerHTML = '<p style="color: #888;">No Kanji for this verb.</p>';
                }

                // Automatically read the kana
                if (verb.kana) {
                    speak(verb.kana);
                }
            }
            
            nextButton.addEventListener('click', () => {
                currentVerbIndex++;
                loadVerb();
            });
            
            speakButton.addEventListener('click', () => {
                if (kanaEl.textContent) {
                    speak(kanaEl.textContent);
                }
            });

            // --- LOAD THE FIRST VERB ---
            loadVerb();
        });
    </script>
</body>
</html>